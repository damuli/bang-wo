<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡¹ğŸ‡¼ å°ç£è¯èª RPGï¼šå¹«æˆ‘å‚³èªª</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&family=Noto+Sans+TC:wght@400;700&display=swap');

        body {
            background-color: #202020;
            color: #fff;
            font-family: 'DotGothic16', 'Noto Sans TC', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* CRT è¢å¹•æƒæç·šç‰¹æ•ˆ */
        .scanlines {
            position: fixed;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
        }

        .game-boy {
            width: 800px;
            height: 600px;
            background-color: #000;
            border: 4px solid #444;
            border-radius: 10px;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0,255,0,0.2);
        }

        /* ä¸ŠåŠéƒ¨ï¼šå ´æ™¯å€ */
        .scene-display {
            flex: 2;
            background-size: cover;
            background-position: center;
            position: relative;
            border-bottom: 4px solid #fff;
            image-rendering: pixelated;
        }
        
        .npc-sprite {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            font-size: 150px;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));
            animation: bounce 2s infinite;
        }

        /* ç‹€æ…‹æ¬„ */
        .status-bar {
            background: #222;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            border-bottom: 2px solid #555;
            font-size: 1.2em;
            color: #0f0; /* å¾©å¤ç¶  */
        }

        /* ä¸‹åŠéƒ¨ï¼šå°è©±èˆ‡æ“ä½œå€ */
        .dialogue-box {
            flex: 1;
            padding: 20px;
            background: #000;
            color: #fff;
            font-size: 1.4em;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .typing-text::after {
            content: 'â–‹';
            animation: blink 0.8s infinite;
        }

        .choices-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .rpg-btn {
            background: #000;
            border: 2px solid #fff;
            color: #fff;
            padding: 15px;
            font-family: inherit;
            font-size: 1em;
            cursor: pointer;
            text-align: left;
            transition: 0.2s;
        }

        .rpg-btn:hover {
            background: #fff;
            color: #000;
            border-color: #0f0;
        }

        .rpg-btn:active {
            transform: scale(0.98);
        }

        /* çµå±€ç•«é¢ç‰¹æ•ˆ */
        .ending-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            text-align: center;
        }
        
        .ending-title {
            font-size: 3em;
            margin-bottom: 20px;
            color: #f1c40f;
            text-shadow: 4px 4px 0 #c0392b;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    </style>
</head>
<body>
    <div class="scanlines"></div>
    <div class="game-boy">
        <div class="status-bar">
            <div>LV. <span id="level">1</span> å¤–åœ‹å­¸ç”Ÿ</div>
            <div>HP (é¢å­): <span id="hp">100</span>/100</div>
            <div>EXP (å°å‘³): <span id="exp">0</span></div>
        </div>

        <div class="scene-display" id="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=1000');">
            <div class="npc-sprite" id="npc-emoji">ğŸ¥¤</div>
        </div>

        <div class="dialogue-box">
            <div id="story-text" class="typing-text">éŠæˆ²è¼‰å…¥ä¸­...</div>
            <div class="choices-container" id="choices-area">
                </div>
        </div>

        <div class="ending-screen" id="ending-layer">
            <h1 class="ending-title" id="ending-title">çµå±€</h1>
            <p id="ending-desc" style="font-size: 1.5em; max-width: 80%; margin-bottom: 30px;"></p>
            <button class="rpg-btn" onclick="location.reload()" style="width: 200px; text-align: center;">é‡æ–°å†’éšª</button>
        </div>
    </div>

<script>
    // === RPG æ•¸æ“šç³»çµ± ===
    let hp = 100; // é¢å­ (Face)
    let exp = 0;  // å°å‘³ (Local Vibe)
    let currentStep = 0;

    // === åŠ‡æœ¬è³‡æ–™åº« (åŸºæ–¼è«–æ–‡ç ”ç©¶) ===
    const storyLine = [
        {
            // åºç« 
            bg: "https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?q=80&w=1000",
            npc: "âœˆï¸",
            text: "ä½ å‰›æŠµé”å°ç£ï¼Œè‚šå­å¾ˆé¤“ã€‚é€™æ˜¯ä¸€å ´é—œæ–¼ã€Œç¦®è²Œã€èˆ‡ã€Œç”Ÿå­˜ã€çš„å†’éšªã€‚\nå¦‚æœä½ çš„ã€Œé¢å­(HP)ã€æ­¸é›¶ï¼ŒéŠæˆ²å°±æœƒçµæŸã€‚\n\nä½ èµ°é€²äº†ä¸€å®¶çŸ¥åé£²æ–™åº—...",
            choices: [
                { text: "é–‹å§‹å†’éšª", next: 1, effect: null }
            ]
        },
        {
            // ç¬¬ä¸€é—œï¼šé£²æ–™åº— (æ–ä¸€æ–)
            // å¼•ç”¨è«–æ–‡ï¼šæ–°å¼ã€Œå¹«æˆ‘ã€[cite: 58, 174]
            bg: "https://images.unsplash.com/photo-1521017432531-fbd92d768814?q=80&w=1000",
            npc: "ğŸ¥¤",
            text: "ã€åº—å“¡ã€‘ï¼šã€Œå…ˆç”Ÿä½ å¥½ï¼Œé€™æ¯é»‘ç³–çå¥¶ï¼Œå–ä¹‹å‰éº»ç…© **å¹«æˆ‘** æ–ä¸€ä¸‹å–”ï¼ã€\n\n(ä½ çš„æŠ‰æ“‡æ™‚åˆ»åˆ°äº†...)",
            choices: [
                { 
                    text: "A. å¥½çš„ï¼(æ‹¿éé£²æ–™ï¼Œè‡ªå·±ä¸Šä¸‹æ–æ™ƒ)", 
                    next: 2, 
                    effect: { hp: 0, exp: 20, msg: "åº—å“¡å¾®ç¬‘é»é ­ã€‚ä½ ç²å¾—äº† 20 é»å°å‘³ç¶“é©—å€¼ï¼" } 
                },
                { 
                    text: "B. æ²’å•é¡Œï¼(ä¸æ¥é£²æ–™ï¼ŒæŠ“ä½åº—å“¡çš„æ‰‹é–‹å§‹æ–)", 
                    next: 2, 
                    effect: { hp: -30, exp: 0, msg: "åº—å“¡åš‡å£äº†ï¼å…¨å ´éœé»˜...ä½ çš„ã€Œé¢å­ã€å—æäº† 30 é»ï¼\n(è§£æï¼šåº—å“¡æ˜¯è«‹ä½ è‡ªå·±æ–é£²æ–™ï¼Œä¸æ˜¯è¦ä½ å¹«ä»–æ–ã€‚)" } 
                }
            ]
        },
        {
            // ç¬¬äºŒé—œï¼šè¨ºæ‰€/æŒ‰æ‘© (è„«è¥ªå­) - é€™æ˜¯æœ€å±éšªçš„ä¸€é—œ
            // å¼•ç”¨è«–æ–‡ï¼šæ­§ç¾©ç¾è±¡ [cite: 7, 78, 138]
            bg: "https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?q=80&w=1000",
            npc: "ğŸ‘©â€âš•ï¸",
            text: "ä½ è¦ºå¾—èº«é«”æœ‰é»ç´¯ï¼Œå»åšäº†å¥åº·æª¢æŸ¥ã€‚\nã€è­·ç†å¸«ã€‘ï¼šã€Œå…ˆç”Ÿï¼Œæˆ‘å€‘è¦é‡é«”è„‚å›‰ï¼Œè«‹ **å¹«æˆ‘** è„«ä¸€ä¸‹è¥ªå­ã€‚ã€",
            choices: [
                { 
                    text: "A. (è¹²ä¸‹ä¾†ï¼Œä¼¸æ‰‹å»è„«è­·ç†å¸«çš„è¥ªå­)", 
                    next: 3, 
                    effect: { hp: -60, exp: 0, msg: "è­·ç†å¸«å°–å«ï¼šã€Œè®Šæ…‹ï¼ã€è­¦å¯Ÿå·®é»ä¾†äº†ã€‚\nä½ çš„ã€Œé¢å­ã€å—åˆ°é‡å‰µï¼Œæ‰£é™¤ 60 é»ï¼\n(è§£æï¼šé€™æ˜¯æœå‹™æ¥­çš„ç¦®è²ŒæŒ‡ä»¤ï¼Œæ˜¯è«‹ä½ è„«è‡ªå·±çš„è¥ªå­ï¼)" } 
                },
                { 
                    text: "B. (è„«æ‰è‡ªå·±è…³ä¸Šçš„è¥ªå­)", 
                    next: 3, 
                    effect: { hp: 0, exp: 30, msg: "æµç¨‹é †åˆ©é€²è¡Œã€‚ä½ æ„Ÿè¦ºè‡ªå·±è¶Šä¾†è¶Šåƒå°ç£äººäº†ï¼\n(ç²å¾— 30 é»å°å‘³)" } 
                }
            ]
        },
        {
            // ç¬¬ä¸‰é—œï¼šé¤å»³ (å¸¶ä½)
            // å¼•ç”¨è«–æ–‡ï¼šå ´åŸŸå”èª¿å‹ [cite: 65, 84]
            bg: "https://images.unsplash.com/photo-1552566626-52f8b828add9?q=80&w=1000",
            npc: "ğŸ½ï¸",
            text: "æª¢æŸ¥å®Œèº«é«”é¤“äº†ï¼Œä½ ä¾†åˆ°ä¸€å®¶ç†±ç‚’åº—ã€‚\nã€æœå‹™ç”Ÿã€‘ï¼šã€Œå…©ä½å—ï¼Ÿå‰é¢è«‹ **å¹«æˆ‘** ååœ¨ç¬¬ä¸‰æ¡Œå–”ã€‚ã€",
            choices: [
                { 
                    text: "A. (èµ°éå»ï¼ŒæŠŠæœå‹™ç”Ÿå…¬ä¸»æŠ±åˆ°ç¬¬ä¸‰æ¡Œ)", 
                    next: 4, 
                    effect: { hp: -50, exp: 0, msg: "æœå‹™ç”Ÿè‡‰ç´…åˆç”Ÿæ°£ã€‚ä½ è¢«è¶•å‡ºäº†é¤å»³ã€‚\n(è§£æï¼šé€™æ˜¯ç©ºé–“æŒ‡å¼•ï¼Œä¸æ˜¯è¦ä½ å¹«æœå‹™ç”Ÿå°±åº§ï¼)" } 
                },
                { 
                    text: "B. (è‡ªå·±èµ°åˆ°ç¬¬ä¸‰æ¡Œåä¸‹)", 
                    next: 4, 
                    effect: { hp: 0, exp: 20, msg: "ä½ é †åˆ©å…¥åº§ã€‚éš”å£æ¡Œçš„å¤§å“¥ç¨±è®šä½ ã€Œå…§è¡Œã€ï¼\n(ç²å¾— 20 é»å°å‘³)" } 
                }
            ]
        },
        {
            // ç¬¬å››é—œï¼šå‚³çµ±æƒ…å¢ƒ (é™·é˜±é¡Œ)
            // å¼•ç”¨è«–æ–‡ï¼šå‚³çµ±å¹«æˆ‘ vs æ–°å¼å¹«æˆ‘ [cite: 19, 114]
            bg: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=1000",
            npc: "ğŸ“¦",
            text: "å›å®¶è·¯ä¸Šï¼Œçœ‹åˆ°é„°å±…é˜¿å©†æ¬è‘—å¾ˆé‡çš„ç®±å­ã€‚\nã€é˜¿å©†ã€‘ï¼šã€Œå¹´è¼•äººï¼Œ**å¹«æˆ‘** æ¬ä¸€ä¸‹é€™å€‹å¥½å—ï¼Ÿã€",
            choices: [
                { 
                    text: "A. (ç«™åœ¨åŸåœ°çœ‹è‘—é˜¿å©†ï¼Œä»¥ç‚ºå¥¹åœ¨å°è‡ªå·±èªªè©±)", 
                    next: 99, // 99 ä»£è¡¨çµç®—
                    effect: { hp: -20, exp: 0, msg: "é˜¿å©†ç¿»äº†å€‹ç™½çœ¼èµ°äº†ã€‚\n(è§£æï¼šé€™æ˜¯å‚³çµ±æƒ…å¢ƒï¼æ˜¯çœŸçš„éœ€è¦å¹«å¿™ï¼)" } 
                },
                { 
                    text: "B. (ç«‹åˆ»ä¸Šå‰æ¥éç®±å­)", 
                    next: 99, 
                    effect: { hp: 10, exp: 30, msg: "é˜¿å©†ï¼šã€Œå“©æªç”˜å¿ƒè€¶ï¼ã€(ä½ çœŸè²¼å¿ƒ)\n(é¢å­æ¢å¾© 10 é»ï¼Œç²å¾— 30 é»å°å‘³)" } 
                }
            ]
        }
    ];

    // === éŠæˆ²æ ¸å¿ƒé‚è¼¯ ===

    function renderScene(index) {
        // æª¢æŸ¥æ˜¯å¦æ­»äº¡
        if (hp <= 0) {
            showEnding("bad_social_death");
            return;
        }

        // æª¢æŸ¥æ˜¯å¦é€šé—œ
        if (index === 99) {
            determineEnding();
            return;
        }

        const data = storyLine[index];
        currentStep = index;

        // æ›´æ–°èƒŒæ™¯èˆ‡ NPC
        document.getElementById("scene-bg").style.backgroundImage = `url('${data.bg}')`;
        document.getElementById("npc-emoji").innerText = data.npc;

        // æ‰“å­—æ©Ÿæ•ˆæœè¼¸å‡ºæ–‡å­—
        const textBox = document.getElementById("story-text");
        textBox.innerHTML = "";
        let i = 0;
        const speed = 30; 
        
        function typeWriter() {
            if (i < data.text.length) {
                textBox.innerHTML += data.text.charAt(i) === '\n' ? '<br>' : data.text.charAt(i);
                i++;
                setTimeout(typeWriter, speed);
            } else {
                // æ–‡å­—æ‰“å®Œå¾Œï¼Œç”Ÿæˆé¸é …
                renderChoices(data.choices);
            }
        }
        typeWriter();
        
        // æ¸…ç©ºèˆŠé¸é …
        document.getElementById("choices-area").innerHTML = "";
    }

    function renderChoices(choices) {
        const area = document.getElementById("choices-area");
        choices.forEach(choice => {
            const btn = document.createElement("button");
            btn.className = "rpg-btn";
            btn.innerText = choice.text;
            btn.onclick = () => handleChoice(choice);
            area.appendChild(btn);
        });
    }

    function handleChoice(choice) {
        // è™•ç†æ•ˆæœ
        if (choice.effect) {
            hp += choice.effect.hp;
            exp += choice.effect.exp;
            if (hp > 100) hp = 100;
            
            // æ›´æ–° UI
            updateStats();
            
            // é¡¯ç¤ºåé¥‹ (ç°¡å–®çš„ alert æˆ–ä¸­é–“å±¤ï¼Œé€™è£¡ç”¨ alert æ¨¡æ“¬ RPG ç³»çµ±è¨Šæ¯)
            if (choice.effect.msg) {
                alert(choice.effect.msg);
            }
        }

        // å‰å¾€ä¸‹ä¸€é—œ
        renderScene(choice.next);
    }

    function updateStats() {
        document.getElementById("hp").innerText = hp;
        document.getElementById("exp").innerText = exp;
        
        // è¡€é‡é¡è‰²
        const hpEl = document.getElementById("hp");
        if (hp < 30) hpEl.style.color = "#e74c3c"; // ç´…
        else if (hp < 70) hpEl.style.color = "#f1c40f"; // é»ƒ
        else hpEl.style.color = "#0f0"; // ç¶ 
    }

    function determineEnding() {
        if (exp >= 80) {
            showEnding("master");
        } else if (exp >= 40) {
            showEnding("normal");
        } else {
            showEnding("awkward");
        }
    }

    function showEnding(type) {
        const screen = document.getElementById("ending-layer");
        const title = document.getElementById("ending-title");
        const desc = document.getElementById("ending-desc");
        
        screen.style.display = "flex";

        if (type === "master") {
            title.innerText = "ğŸ† çµå±€ï¼šå°å‘³å¤§å¸«";
            desc.innerHTML = "ä½ å®Œå…¨æŒæ¡äº†ã€Œå¹«æˆ‘ã€çš„ç²¾éš¨ï¼<br>ç¾åœ¨ä½ å·²ç¶“å¯ä»¥åƒç•¶åœ°äººä¸€æ¨£ï¼Œ<br>åœ¨é£²æ–™åº—å’Œè¨ºæ‰€è‡ªå¦‚ç©¿æ¢­ã€‚<br>æœå‹™å“¡éƒ½è¦ºå¾—ä½ è¶…æœ‰ç¦®è²Œï¼";
            desc.style.color = "#f1c40f";
        } else if (type === "normal") {
            title.innerText = "ğŸ˜ çµå±€ï¼šæ™®é€šçš„éŠå®¢";
            desc.innerHTML = "ä½ é›–ç„¶å¶çˆ¾æœƒæœƒéŒ¯æ„ï¼Œ<br>ä½†å¤§é«”ä¸Šé‚„ç®—éå¾—å»ã€‚<br>é€™å°±æ˜¯å­¸ç¿’èªè¨€çš„éç¨‹å˜›ï¼";
            desc.style.color = "#fff";
        } else if (type === "awkward") {
            title.innerText = "ğŸ¥¶ çµå±€ï¼šå°·å°¬ç™Œæœ«æœŸ";
            desc.innerHTML = "ä½ ç¸½æ˜¯æŠŠã€Œå¹«æˆ‘ã€ç•¶æˆçœŸçš„è¦å¹«å¿™...<br>ä½ è©¦åœ–å¹«åº—å“¡åšäº‹ï¼Œå»é€ æˆäº†æ›´å¤šéº»ç…©ã€‚<br>åº—å“¡å€‘ç¾åœ¨çœ‹åˆ°ä½ éƒ½æœƒèº²èµ·ä¾†ã€‚";
            desc.style.color = "#3498db";
        } else if (type === "bad_social_death") {
            title.innerText = "ğŸ’€ çµå±€ï¼šç¤¾æœƒæ€§æ­»äº¡";
            desc.innerHTML = "ä½ çš„é¢å­(HP)æ­¸é›¶äº†ã€‚<br>å› ç‚ºä½ åœ¨è¨ºæ‰€è„«äº†è­·ç†å¸«çš„è¥ªå­ï¼Œ<br>ç¾åœ¨ä½ å·²ç¶“è¢«åˆ—å…¥é»‘åå–®ï¼ŒéŠæˆ²çµæŸã€‚";
            desc.style.color = "#e74c3c";
        }
    }

    // å•Ÿå‹•éŠæˆ²
    renderScene(0);

</script>
</body>
</html>
